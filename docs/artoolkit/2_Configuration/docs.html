<h1 id="adjusting-for-over-under-exposed-video-sources">Adjusting for Over-/Under-Exposed Video Sources</h1>
<p>Part of ARToolKit&#39;s tracking operates on a binarized image, that is, an image that has been converted into black and white pixels only. All pixels above a certain level of brightness, referred to as the &quot;binarization threshold&quot;, or just &quot;threshold&quot; are converted to white, and all pixels below this threshold are converted to black.</p>
<p>The binarization threshold is an 8-bit number that is in the range <code>[0, 255]</code>, inclusive. The default value is usually set in the middle of this range, allowing ARToolKit to easily find markers in images that have good contrast. The default value is defined by the symbol <code>AR_DEFAULT_LABELING_THRESH</code> in arConfig.h.</p>
<p>Where images have poor contrast, or are over- or under-exposed, the default binarization threshold should be adjusted to compensate. This is achieved by calling the ARToolKit function <code>arGetLabelingThresh()</code> to get the current threshold value, adjusting it up for an image that is too bright, or down for an image that is too dark, and then calling <code>arSetThreshold()</code> with the new value. This is demonstrated in this snippet from the simpleLite example:</p>
<p>&lt;pre&gt;
    static void Keyboard(unsigned char key, int x, int y)
    {
        int threshChange = 0;
        switch (key) {
            case &#39;-&#39;:
                threshChange = -5;
                break;
            case &#39;+&#39;:
            case &#39;=&#39;:
                threshChange = +5;
                break;
            default:
                break;
        }
        if (threshChange) {
            int threshold;
            arGetLabelingThresh(gARHandle, &amp;threshold);
            threshold += threshChange;
            if (threshold &lt; 0) threshold = 0;
            if (threshold &gt; 255) threshold = 255;
            arSetLabelingThresh(gARHandle, threshold);
            printf(&quot;threshold changed to %d.\n&quot;, threshold);
        }
    }
&lt;/pre&gt;

</p>
<p>How does the user know how much adjustment to make? The simplest way is to let the user see the image as ARToolKit sees it. ARToolKit includes a &quot;debug&quot; mode to facilitate this.</p>
<p>The debug mode can be toggled on and off easily, as seen in this snippet from the simpleLite example:</p>
<p>&lt;pre&gt;
static void Keyboard(unsigned char key, int x, int y) 
{
    int mode;
    switch (key) {
        case &#39;D&#39;:
        case &#39;d&#39;:
            arGetDebugMode(gARHandle, &amp;mode);
            arSetDebugMode(gARHandle, !mode);
            break;
        default:
            break;
    }
}
&lt;/pre&gt;

</p>
<p>For examples based on use of the gsub_lite library (as simpleLite is), the debug image will be drawn in place of the regular image by the call to <code>arglDispImage()</code> whenever debug mode is enabled.</p>
<p>For examples based on the gsub library (e.g. simpleTest), the debug image must be manually drawn.</p>
<h1 id="calibrating-your-camera">Calibrating Your Camera</h1>
<p>In the ARToolKit software, default camera properties are contained in the camera parameter file camera_para.dat, that is read in each time an application is started. These parameters are sufficient for basic tracking for a wide range of different cameras. However, to get best tracking accuracy, particularly when looking directly onto a flat marker, it is important to calibrate your camera. Using a calibrated camera improves tracking accuracy and reduces jitter. In the case of video see-through AR devices (goggles that are not optically see through that usually utilize stereo cameras), having calibrated cameras can help remove lens distortion in the displayed video image.</p>
<p><img src="../_media/beginning_calibration_with_the_chessboard.jpg" alt="Beginning calibration with the chessboard"></p>
<p>Using a very simple camera calibration technique it is possible to generate a separate parameter file for the specific camera(s) that are being used. This page presents how to use the utility programs included with ARToolKit to calibrate your video camera.</p>
<h3 id="set-up">Set-Up</h3>
<p>Calibration works by capturing images of the pre-prepared calibration pattern with the camera. Two calibration pattern image files are provided by the  ARToolKit SDK (path: [downloaded ARToolKit SDK root directory]/doc/patterns):</p>
<pre><code>&quot;Calibration chessboard (US Letter).pdf&quot;
&quot;Calibration chessboard (A4).pdf&quot;
</code></pre><p>Print the PDF file using a media size respective to the labeled PDF filename.</p>
<p><img src="../_media/chessboard_ready_for_calibration.jpg" alt="Chessboard pattern affixed to board ready for calibration"></p>
<p>Once printed, the pattern must be affixed to a flat surface. The easiest means of doing this is to use a piece of thin very flat board (as might be obtained from a hardware store) and a dry glue. Using a millimeter rule, measure the size of the edges of the squares. If printed without scaling, this distance will be exactly 30 mm. Other sizes can be used, as long as they are accurately known.</p>
<p>Finally, set up your camera. A calibration file is only valid for one focus setting of the camera (although it will still work at other focal lengths), so choose in advance the focus setting for the camera which will be used most often. <em>This is especially important when your camera supports multiple aspect ratios. While the resolution need not be 1:1 with your camera calibration, the aspect ratio is extremely important.</em></p>
<h3 id="how-it-works">How it Works</h3>
<p>The <a href="http://artoolkit.org/docs/Calibration_chessboard.pdf">&quot;Calibration pattern.pdf&quot;</a> image consists of a grid of black and white squares surrounded by a white border. When viewed through the camera lens, lens distortion causes the straight lines at the edges of the squares to appear curved. The calib_camera program uses the OpenCV library to locate the corners of the squares and then measures the spacing between the corners and uses this information to calculate the lens distortion. The more images captured, and the more angles they are captured from, the lower the error in the distortion measurement.</p>
<h4 id="executing-the-calib_camera-application">Executing the calib_camera Application</h4>
<p>Open a command prompt:</p>
<pre><code> Mac OS X or Linux: open a Terminal window  
</code></pre><p>or  </p>
<pre><code>Windows: open the &quot;Run&quot; prompt from the Start menu, in the &quot;Open:&quot; textbox, type &quot;cmd&quot;&lt;return&gt;
</code></pre><hr>
<p>For the Android or iOS version of calib_camera, build and deploy the Android Studio, Eclipse or XCode project available in the respective platform project directory found directly under the root directory of the download ARToolKit SDK specific for the platform.</p>
<hr>
<p>Run the calib_camera application executable from the command prompt. Change the directory to the path: [downloaded ARToolKit SDK root directory]/bin.</p>
<p>OS X or Linux command-line, type:</p>
<p>&lt;pre&gt;
    ./calib_camera
&lt;/pre&gt;

</p>
<p>Windows command-line, type:</p>
<p>&lt;pre&gt;
    calib_camera.exe
&lt;/pre&gt;

</p>
<p>You will see output similar to this in your terminal:</p>
<p>&lt;pre&gt;
    CHESSBOARD_CORNER_NUM_X = 7
    CHESSBOARD_CORNER_NUM_Y = 5
    CHESSBOARD_PATTERN_WIDTH = 30.000000
    CALIB_IMAGE_NUM = 10
    Video parameter:
    Using default video config.
    Image size (x,y) = (640,480)
&lt;/pre&gt;

</p>
<p>At this point, you should see the image from the camera appear.</p>
<h5 id="optional-changing-the-default-calibration-pattern-settings">Optional - Changing the Default Calibration Pattern Settings</h5>
<p>If you need to, the size of the calibration squares, the number of intermediate corners in horizontal and vertical directions (i.e. the number of rows minus 1 and the number of columns minus 1), and the number of calibration images captured can all be adjusted from the command line. Running the utility with the <code>--help</code> option will show the various command-line options for adjusting the default calibration settings.</p>
<p>OS X or Linux command-line, type:</p>
<pre><code>./calib_camera --help
</code></pre><p>Windows command-line, type:</p>
<pre><code>calib_camera.exe --help
</code></pre><p>The help text is reproduced here:</p>
<pre><code>Usage: ./calib_camera [options]
Options:
  -vconf &lt;video parameter for the camera&gt;  
  -cornerx=n: specify the number of corners on chessboard in
              X direction.  
  -cornery=n: specify the number of corners on chessboard in
              Y direction.  
  -imagenum=n: specify the number of images captured for calibration.  
  -pattwidth=n: specify the square width in the chessbaord.  
  -h or -help or --help: show this message
</code></pre><h5 id="optional-specifying-options-for-video-configuration">Optional - Specifying Options for Video Configuration</h5>
<p>In addition to command-line options for controlling the calibration pattern settings, a video configuration can also be specified on the command line using the <code>--vconf</code> parameter (followed by the actual video config, in quotes if it includes spaces), allowing you to choose a video format and/or image size, if your camera supports those options.</p>
<p>For example, this invocation on Mac OS X requests the image from the camera be scaled to 640x480:</p>
<pre><code>./calib_camera --vconf &quot;-width=640 -height=480&quot;
</code></pre><p>If you use the video configuration to select a video size different from that which will be used later, be sure to maintain the same proportions between the width and the height. For example, a 4:3 image of 1600x1200 pixels can be scaled to 800x600 or 640x480, whereas a 16:9 image of 1920x1080 image can be scaled to 860x540. <em>A camera calibration is only valid per aspect ratio.</em></p>
<h4 id="capturing-calibration-images">Capturing Calibration Images</h4>
<p>Calibration requires the capturing of a series of images. In the top-left corner of the capture window is displayed the number of images captured so far. Point the camera at the chessboard grid, and the inner corners of the squares will be highlighted with &#39;X&#39; marks and numbered.</p>
<p>When the camera can clearly see all the intermediate corners, the &#39;X&#39; marks turn RED, and a calibration image can be captured:
<img src="../_media/calibration_example_ok_1.jpg" alt="A good view of the calibration board, ready to capture."></p>
<p>If some of the corners are obscured by the edges of the camera frame, or poor lighting or reflection, the &#39;X&#39; will be GREEN, and no calibration image can be captured until the optical conditions are changed.
<img src="../_media/calibration_example_not_ok.jpg" alt="A poor view of the calibration board, NOT ready to capture."></p>
<p>Once you have an image with all red &#39;X&#39;s, you can press the keyboard spacebar. The spacebar tab captures the video frame augmented with red &#39;X&#39; characters. The relative positions of the &#39;X&#39; indicators on the captured frame are calculated, recorded, written to standard out of the command-line window and the capture counter is incremented.</p>
<p>In order to obtain a good calibration for the camera, it is important to obtain images of the calibration board at a variety of angles to the camera lens. The images below give examples of the configurations of the calibration board you should try to obtain. Note that these involve holding the calibration board at different angles relative to the camera, including upside-down:
<img src="../_media/calibration_example_ok_1.jpg" alt="Calibration example OK 1">
<img src="../_media/calibration_example_ok_2.jpg" alt="Calibration example OK 2">
<img src="../_media/calibration_example_ok_3.jpg" alt="Calibration example OK 3">
<img src="../_media/calibration_example_ok_4.jpg" alt="Calibration example OK 4">
<img src="../_media/calibration_example_ok_5.jpg" alt="Calibration example OK 5">
<img src="../_media/calibration_example_ok_6.jpg" alt="Calibration example OK 6"></p>
<p>Once all the calibration images have been captured, that is, ten (ten is the default) presses of the spacebar, the calibration data is tabulated and a distortion factor associated to the camera device is calculated. The tabulated calibration data is written to standard out of the command-line window. At this point, the application prompts for a filename to write the calibration data to.</p>
<pre><code>--------------------------------------
SIZE = 640, 480
Distortion factor: k1=-0.064153, k2=0.000674,  
                   p1=-0.003693, p2=-0.011219,  
                   fx=6819.694824, fy=4906.716797,  
                   x0=-13355.703125, y0=1494.664429,  
                   s=-0.891334  
-7651.11364 -0.00000 -13355.70312 0.00000
-0.00000 -5504.91609 1494.66443 0.00000
0.00000 0.00000 1.00000 0.00000
--------------------------------------
Err[ 1]: 0.384557[pixel]
Err[ 2]: 0.637637[pixel]
Err[ 3]: 0.605374[pixel]
Err[ 4]: 0.517292[pixel]
Err[ 5]: 0.730103[pixel]
Err[ 6]: 0.560028[pixel]
Err[ 7]: 0.586818[pixel]
Err[ 8]: 0.501263[pixel]
Err[ 9]: 0.437201[pixel]
Err[10]: 0.385920[pixel]
Filename[camera_para.dat]:
</code></pre><p>If the calibration data is good, there should be very low estimated error in each image: hopefully, less than 1 pixel. <em>Error greater than 2 pixels indicates a poor calibration, and it should be abandoned and restarted.</em></p>
<p>At this point, you can press return or enter on the keyboard to save the data in a file named &quot;camera_para.dat&quot;.</p>
<p>That&#39;s all there is to it. This new calibration procedure takes only a minute, and should be fast enough that you can recalibrate your camera any time you change its focus or zoom. With good calibration, you&#39;ll see much improved tracking in ARToolKit.</p>
<h3 id="using-the-calibration-data">Using the Calibration Data</h3>
<p>To use your new calibration file, just replace the default camera_para.dat file in ARToolKit&#39;s <code>bin/Data</code> directory with your newly saved data. It can be helpful to keep a collection of camera_para.dat files for cameras you commonly use.</p>
<h3 id="further-reading-stereo-camera-calibration">Further Reading - Stereo Camera Calibration</h3>
<p>If calibrating a stereo camera, calibrate each eye separately first, saving the parameters, then run the program calib_stereo to perform the final step of <a href="8_Advanced_Topics:config_camera_stereo_tracking">inter-ocular calibration</a>.</p>
<h1 id="configuring-video-capture-in-artoolkit">Configuring Video Capture in ARToolKit</h1>
<p>ARToolKit includes libARvideo, a cross-platform library which captures video from a variety of different sources. In general, most users of ARToolKit who have a single webcam attached to their system will never delve into the workings of this library. However, the module or modules inside this library generally allow for a degree of configuration to control parameters of the capture sources with which they interface.</p>
<h2 id="changing-video-configuration">Changing Video Configuration</h2>
<p>This section of the manual details some of the configuration options available with libARvideo.</p>
<h3 id="setting-configuration-at-run-time">Setting Configuration at Run Time</h3>
<p>Video configurations are passed to libARvideo in a standard way; as a c-string containing text. What to put in the <em>contents</em> of the string depends on your capture source.</p>
<p>The contents of the string are different for different capture sources because although libARvideo presents a standard API for passing video to other code (e.g. libAR, libARgsub_lite and libARgsub), there is custom code inside libARvideo for each capture source (e.g. QuickTime, DirectShow, libdc1394). The capture sources generally implement a variety of different approaches to video stream acquisition. So, the configuration parameters are different depending on the underlying capture module being used.</p>
<p>The simplest way to specify the video configuration (without recompiling the example applications) is to create an <a href="1_Getting_Started:general_environment_variables">environment variable</a> <code>ARTOOLKIT5_VCONF</code> with the video configuration you wish to use.</p>
<h4 id="artoolkit-utilities">ARToolKit Utilities</h4>
<p>Some of the ARToolKit utilities (including <a href="2_Configuration:config_camera_calibration">calib_camera</a>, <a href="8_Advanced_Topics:config_camera_stereo_tracking">calib_stereo</a> and check_id) accept video configuration(s) as command-line parameters. The desired configuration is passed after a parameter &quot;--vconf&quot; (or --vconfL or --vconfR for calib_stereo). Note that if the video configuration string includes spaces, it must be quoted to prevent the shell passing it as multiple parameters.</p>
<h3 id="setting-configuration-programmatically">Setting Configuration Programmatically</h3>
<p>Video configuration can also be passed to libARvideo programmatically (as the sole parameter to the arVideoOpen() call). When no string (NULL) or an empty string (&quot;&quot;) is passed, libARvideo looks for an environment variable &quot;ARTOOLKIT5_VCONF&quot; (as mentioned above) for the string. If this environment variable is not found, the video module will use a default configuration.</p>
<p>In most of the ARToolKit examples, the video configuration is specified in a string named &quot;vconf&quot;. Do a search in your source editor for &quot;vconf&quot; to see this. So in most of the examples, editing the vconf string in the source code will change the video configuration being used.</p>
<p>Of course, editing source code requires recompiling for the changes to take effect, so a few of the examples accept a command-line parameter and use this as vconf. You can look at the source code to see if a given example does so.</p>
<h4 id="artoolkit-for-unity">ARToolKit for Unity</h4>
<p>ARToolKit for Unity allows you to specify video configuration separately for each supported platform directly in the Unity Editor.</p>
<h2 id="capture-sources-and-switching-them">Capture Sources and Switching Them</h2>
<p>Where more than one capture source has been compiled into libARvideo on a given platform, you are allowed to switch between the options.</p>
<p>This table lists the capture sources available on each platform. <em>Note: If you have a binary release of ARToolKit, not all of these capture sources may have been compiled into your copy!</em>:</p>
<p>| Platform                                          | Capture source (descriptive name) | Constant required in &lt;AR/config.h&gt; for this source to be compiled into libARvideo | video config string to select this capture source | Avail.: (1)             | Unavail.: (2) |
|---------------------------------------------------|-----------------------------------|-----------------------------------------------------------------------------------|---------------------------------------------------|-------------------------|---------------|
| All                                               | Dummy input                       | AR_INPUT_DUMMY                                                                    | -device=Dummy                                     | 4.0.0                   |               |
| Mac OS X, Windows, Linux                          | JPEG image input                  | AR_INPUT_IMAGE                                                                    | -device=Image                                     | 4.6.2                   |               |
| Linux                                             | Video4Linux                       | AR_INPUT_V4L                                                                      | -device=LinuxV4L                                  | 4.0.0                   |               |
| Linux                                             | GStreamer                         | AR_INPUT_GSTREAMER                                                                | -device=GStreamer                                 | 4.3.2                   |               |
| Linux                                             | libdc1394                         | AR_INPUT_1394CAM                                                                  | -device=Linux1394Cam                              | 4.0.0                   |               |
| Mac OS X, Windows                                 | QuickTime® (enhanced)            | AR_INPUT_QUICKTIME                                                                | -device=QUICKTIME                                 | 4.3.0                   |               |
| Windows                                           | DirectShow®                      | AR_INPUT_WINDOWS_DIRECTSHOW                                                       | -device=WinDS                                     | 4.0.0644                | 4.0.065,4.1.x |
| Windows                                           | DSVideoLib                        | AR_INPUT_WINDOWS_DSVIDEOLIB                                                       | -device=WinDSVL                                   | 4.1.0                   |               |
| Windows                                           | DragonFly FlyCapture®            | AR_INPUT_WINDOWS_DRAGONFLY                                                        | -device=WinDF                                     | 4.0.0644                | 4.0.065       |
| Mac OS X                                          | QuickTime®                       | AR_INPUT_QUICKTIME_OLD                                                            | -device=QUICKTIME_OLD                             | 4.0.0                   |               |
| Windows                                           | HDCam64                           | AR_INPUT_WINDOWS_HDCAM                                                            | -device=WinHD                                     | 4.0.0644                | 4.0.065       |
| Linux                                             | libdv                             | AR_INPUT_DV                                                                       | -device=LinuxDV                                   | 4.0.0                   | 4.1.x, 4.3.x  |
| SGI Irix                                          | SGI video input                   | AR_INPUT_SGI                                                                      | -device=SGI                                       | 4.0.0                   | 4.1.x, 4.3.x  |
| Mac OS X                                          | QuickTime® (v7.0 and later)      | AR_INPUT_QUICKTIME7                                                               | -device=QuickTime7                                | 4.5.0                   |               |
| iOS                                               | iOS video input                   | AR_INPUT_IPHONE                                                                   | -device=iPhone                                    | 4.4.3 (iOS release 1.0) |               |
| Windows                                           | Media Foundation                  | AR_INPUT_WINDOWS_MEDIA_FOUNDATION                                                 | -device=WinMF                                     | 5.1.5                   |               |
| Windows Store (Windows 8.1 and Windows Phone 8.1) | Windows Media Capture             | AR_INPUT_WINDOWS_MEDIA_CAPTURE                                                    | -device=WinMC                                     | 5.1.7                   |               |</p>
<p>(1): First version of ARToolKit Professional in which this capture source became available.
(2): Version(s) of ARToolKit Professional in which this source is/was unavailable or unusable.</p>
<h4 id="video-configuration-options">Video configuration options</h4>
<p>Notes on the tables below:</p>
<ul>
<li>Items inside square brackets (&quot;[&quot; and &quot;]&quot;) are optional modifications to parameters, e.g. an option listed below as &quot;-[no]foo&quot; means that option &quot;-foo&quot; activates some option &quot;foo&quot;, and option &quot;-nofoo&quot; deactivates it.</li>
<li>Items separated by a vertical bar (&quot;|&quot;) are mutually-exclusive options. Use only one.</li>
<li>Items in italic typeface are placeholders, which you should replace. E.g. N indicates an integer number should be inserted.</li>
</ul>
<h3 id="ar_video_device_dummy">AR_VIDEO_DEVICE_DUMMY</h3>
<p>| video config string | usage notes                                                                                                                   | Default value                   | Avail.: (1) | Unavail.: (2) |
|---------------------|-------------------------------------------------------------------------------------------------------------------------------|---------------------------------|-------------|---------------|
| -device=Dummy       | Select this device for use.                                                                                                   |                                 | 4.0.0       |               |
| -width=N            | Specify the width of the returned image.                                                                                      | 640                             | 4.0.0       |               |
| -height=N           | Specify the height of the returned image.                                                                                     | 480                             | 4.0.0       |               |
| -bufferpow2         | Requests that images are returned in a buffer which has power-of-two dimensions.                                              | Buffers are same size as image. | 4.4.3       |               |
| -format=X           | Return images with pixels in format X, where X is one of the following format tokens: BGRA, RGBA, RGBA_5551, RGBA_4444, y420 | BGRA                            |             |               |</p>
<h3 id="ar_video_device_image">AR_VIDEO_DEVICE_IMAGE</h3>
<p>| video config string           | usage notes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Default value                                                                       | Avail.: (1) | Unavail.: (2) |
|-------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|-------------|---------------|
| -device=Image                 | Select this device for use.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                     | 4.6.2       |               |
| -width=N                      | Specify the width of the returned image.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Width of first JPEG in image list.                                                  | 4.6.2       |               |
| -height=N                     | Specify the height of the returned image.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Height of first JPEG in image list.                                                 | 4.6.2       |               |
| -bufferpow2                   | Requests that images are returned in a buffer which has power-of-two dimensions.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Buffer of same size as first JPEG in image list.                                    | 4.6.2       |               |
| -format=X                     | Return images with pixels in format X, where X is one of the following format tokens: RGB, RGBA, MONO. Note that where the format requires a conversion from the native JPEG format (usually RGB) to anything other than MONO, there is a performance penalty imposed by the conversion. ARToolKit can natively handle RGB, RGBA and MONO JPEG formats, however in some circumstances, displaying RGB format images may have a performance penalty compared to RGBA format images because of data alignment issues. Benchmarking is recommended if performance is of concern. | RGB for RGB-format JPEGs, RGBA for RGBA-format JPEGs, or MONO for monochrome JPEGs. | 4.6.2       |               |
| -[no]loop                     | In loop mode, after reading last image, the next read will return the first image. In noloop mode, no after reading the last image, no further images will be returned. May be used multiple times; later invocations will override earlier.                                                                                                                                                                                                                                                                                                                                  | -noloop                                                                             | 4.6.2       |               |
| -image=pathname               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                     |             |               |
| -image=&quot;pathname with spaces&quot; | Specifies image to be read from file. Pathname is relative to the current working directory, or an absolute pathname in the system-native format. May be used an arbitrary number of times in a single config. string.                                                                                                                                                                                                                                                                                                                                                        |                                                                                     | 4.6.2       |               |</p>
<h3 id="ar_video_device_v4l">AR_VIDEO_DEVICE_V4L</h3>
<p>| video config string    | usage notes                               | Default value | Avail.: (1) | Unavail.: (2) |
|------------------------|-------------------------------------------|---------------|-------------|---------------|
| -device=LinuxV4L       | Select this device for use.               |               | 4.0.0       |               |
| -width=N               | Specify the width of the returned image.  | 640           | 4.0.0       |               |
| -height=N              | Specify the height of the returned image. | 480           | 4.0.0       |               |
| -contrast=N            | specifies contrast. (0.0 &lt;-&gt; 1.0)         |               | 4.0.0       |               |
| -brightness=N          | specifies brightness. (0.0 &lt;-&gt; 1.0)       |               | 4.0.0       |               |
| -color=N               | specifies color. (0.0 &lt;-&gt; 1.0)            |               | 4.0.0       |               |
| -hue=N                 | specifies hue. (0.0 &lt;-&gt; 1.0)              |               | 4.0.0       |               |
| -whiteness=N           | specifies whiteness. (0.0 &lt;-&gt; 1.0)        |               | 4.0.0       |               |
| -channel=N             | specifies source channel.                 | 3             | 4.0.0       |               |
| -dev=filepath          | specifies device file.                    | /dev/video0   | 4.0.0       |               |
| -mode=[PAL/NTSC/SECAM] | specifies TV signal mode.                 | NTSC          | 4.0.0       |               |
| -format=[BGR/BGRA]     | specifies pixel format.                   | BGR           | 4.0.0       |               |</p>
<h3 id="ar_video_device_dv">AR_VIDEO_DEVICE_DV</h3>
<h3 id="ar_video_device_1394cam">AR_VIDEO_DEVICE_1394CAM</h3>
<p>Extra help on building this video capture module can be found on the page <a href="8_Advanced_Topics:windows_building_libarvideo">Building libARvideo</a>.</p>
<p>| video config string                                                                                                                                                                                                                                                                                | usage notes                                                                                           | Default value                                  | Avail.: (1) | Unavail.: (2) |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------|------------------------------------------------|-------------|---------------|
| -device=Linux1394Cam                                                                                                                                                                                                                                                                               | Select this device for use.                                                                           |                                                | 4.0.0       |               |
| -port=N                                                                                                                                                                                                                                                                                            | specifies a FireWire adaptor port (-1: Any).                                                          | 0                                              | 4.0.0       |               |
| -euid=N                                                                                                                                                                                                                                                                                            | specifies EUID of a FireWire camera (-1: Any).                                                        | 0                                              | 4.0.0       |               |
| -mode=[320x240_YUV422 / 640x480_YUV422 / 640x480_RGB / 640x480_YUV411 / 640x480_YUV411_HALF / 640x480_MONO / 640x480_MONO_COLOR / 640x480_MONO_COLOR2 / 640x480_MONO_COLOR3 / 640x480_MONO_COLOR_HALF / 640x480_MONO_COLOR_HALF2 / 640x480_MONO_COLOR_HALF3 / 1024x768_MONO / 1024x768_MONO_COLOR] | specifies input image format.                                                                         | Depends on camera selected during execution of | 4.0.0       |               |
| -rate=N                                                                                                                                                                                                                                                                                            | specifies desired framerate of a FireWire camera. (1.875, 3.75, 7.5, 15, 30, 60)                      | 30                                             | 4.0.0       |               |
| -reset                                                                                                                                                                                                                                                                                             | resets camera to factory default settings. This is required for DFK21AF04 when it has been connected. |                                                | 4.0.0       |               |</p>
<h3 id="ar_video_device_sgi">AR_VIDEO_DEVICE_SGI</h3>
<h3 id="ar_video_device_windows_directshow">AR_VIDEO_DEVICE_WINDOWS_DIRECTSHOW</h3>
<p>Extra help on building this video capture module can be found on the page <a href="8_Advanced_Topics:windows_building_libarvideo">Building libARvideo</a>.</p>
<p>| video config string | usage notes | Default value | Avail.: (1) | Unavail.: (2) |
|---------------------|---------------|-------------|---------------|-------------|
| -device=WinDS | Select this device for use. | 4.0.0644 | 4.0.065 |
| -showDialog | Request that the WDM capture PIN (configuration sheet) be shown to the user when the video stream is opened. | -showDialog (only if no config string is supplied). | 4.0.0644 | 4.0.065 |
| -showDeviceList | Do not actually open the device, but instead dump a list of device numbers and device names to the standard output. The format of the dump is up to 2 decimal digits (beginning with &#39;1&#39; for the first device), followed by a colon and a space, and the remaining characters before the new line constituting the device name, as known to WDM. | 4.0.0644 | 4.0.065 |
| -devNum=<em>n</em> | Open device <em>n</em>, rather than the default device. | 1 | 4.0.0644 | 4.0.065 |
| -flipH | Flip camera image horizontally. | 4.0.0644 | 4.0.065 |
| -flipV | Flip camera image vertically. | -flipV (only if no config string is supplied). | 4.0.0644 | 4.0.065 |</p>
<h3 id="ar_video_device_windows_dragonfly">AR_VIDEO_DEVICE_WINDOWS_DRAGONFLY</h3>
<p>| video config string                                                                                                                                                                                                                                                                                         | usage notes                                                                                       | Default value | Avail.: (1) | Unavail.: (2) |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|---------------|-------------|---------------|
| -device=WinDF                                                                                                                                                                                                                                                                                               | Select this device for use.                                                                       |               |             |               |
| -rate=N                                                                                                                                                                                                                                                                                                     | Specifies desired input framerate. (1.875, 3.75, 7.5, 15, 30, 60, 120)                            | 15            | 4.6.0       |               |
| -mode=[160x120YUV444 / 320x240YUV422 / 640x480YUV411 / 640x480YUV422 / 640x480RGB / 640x480Y8 / 640x480Y16 / 800x600YUV422 / 800x600RGB / 800x600Y8 / 800x600Y16 / 1024x768YUV422 / 1024x768RGB / 1024x768Y8 / 1024x768Y16 / 1280x960YUV422 / 1280x960RGB / 1280x960Y8 / 1280x960Y16 / 1600x1200YUV422 / 1600x1200RGB / 1600x1200Y8 / 1600x1200Y16] | Specifies input image format. N.B. Not all formats listed may be supported by ARToolKit.          | 1024x768RGB   | 4.6.0       |               |
| -index=N                                                                                                                                                                                                                                                                                                    | Specifies bus index of device to use. (Range is from 0 to number of connected devices minus one.) | 0             | 4.6.0       |               |</p>
<h3 id="ar_video_device_windows_hdcam">AR_VIDEO_DEVICE_WINDOWS_HDCAM</h3>
<p>| video config string | usage notes | Default value | Avail.: (1) | Unavail.: (2) |
|---------------------|-------------|---------------|-------------|---------------|
| -device=WinHD | Select this device for use. | | | |</p>
<h3 id="ar_video_device_quicktime7">AR_VIDEO_DEVICE_QUICKTIME7</h3>
<p>The QuickTime7 video plugin uses the QTKit API introduced with QuickTime version 7 on Mac OS X. It offers improved performance over the previous QuickTime modules, however as of ARToolKit Professional v4.5.0, it does not yet support reading from file or network stream, so the previous QUICKTIME module should still be used in that case.</p>
<p>| video config string | usage notes | Default value | Avail.: (1) | Unavail.: (2) |
|---------------------|-------------|---------------|-------------|---------------|
| -device=QuickTime7 | Select this device for use. | | 4.5.0 |
| -width=<em>w</em> | Scale camera native image to width w. | camera native image width | 4.5.0 | |
| -height=<em>h</em> | Scale camera native image to height h. | camera native image height | 4.5.0 | |
| -pixelformat=<em>cccc</em> | Return images with pixels in format cccc, where cccc is either a numeric pixel format number or a valid 4-character-code for a pixel format. The following numeric values are supported: 24 (24-bit RGB), 32 (32-bit ARGB), 40 (8-bit grey) The following 4-character-codes are supported: BGRA, RGBA, ABGR, 24BG, 2vuy, yuvs. (See http://developer.apple.com/library/mac/#technotes/tn2010/tn2273.html) | Depends on camera; for many USB video-class devices, either &#39;2vuy&#39; or &#39;yuvs&#39;. | 4.5.0 | |
| -source=<em>N</em> | Acquire video from connected source device with index N. | 0 | 4.5.0 | |
| -nomuxed | Do not search for video from multiplexed video/audio devices (e.g. DV cams). | Off (i.e. muxed sources are included in the search) | 4.6.0 | |</p>
<h3 id="ar_video_device_quicktime">AR_VIDEO_DEVICE_QUICKTIME</h3>
<p>Extra help on building this video capture module can be found on the page <a href="8_Advanced_Topics:windows_building_libarvideo">Building libARvideo</a>.</p>
<p>The QuickTime video plugin can operate in two modes:</p>
<ul>
<li>In the first mode (the default), it acquires live video from a video capture source via QuickTime&#39;s video grabber. (Note that QuickTime for Windows does not come with a video digitizer component, and a third party component (e.g. <a href="http://www.eden.net.nz/7/20071008/">WinVDIG</a> must be installed.)</li>
<li>In the second mode, specified by passing a video configure parameter &quot;-movie=<em>pathnameOrURL</em>&quot;, the plugin can open any valid QuickTime resource, including movies from disk, or movies streamed via http, rtsp or ftp protocols.</li>
</ul>
<h4 id="quicktime-video-input-from-vdig">QuickTime Video Input from VDIG</h4>
<p>| video config string | usage notes | Default value | Avail.: (1) | Unavail.: (2) |
|---------------------|-------------|---------------|-------------|---------------|
| -device=QUICKTIME | Select this device for use. | | 4.3.0 | |
| -[no]dialog | Don&#39;t display video settings dialog. | -dialog | 4.3.0 | |
| -[no]standarddialog | Don&#39;t remove unnecessary panels from video settings dialog. | -nostandarddialog | 4.3.0 | |
| -width=<em>w</em> | Scale camera native image to width w. | 640 | 4.3.0 | |
| -height=<em>h</em> | Scale camera native image to height h. | 480 | 4.3.0 | |
| -[no]fps | Overlay camera frame counter on image. | -nofps | 4.3.0 | |
| -grabber=<em>n</em> | With multiple QuickTime video grabber components installed, use component n (default n=1). N.B. It is NOT necessary to use this option if you have installed more than one video input device (e.g. two cameras) as the default QuickTime grabber can manage multiple video channels. | 1 | 4.3.0 | |
| -pixelformat=<em>cccc</em> | Return images with pixels in format cccc, where cccc is either a numeric pixel format number or a valid 4-character-code for a pixel format. The following numeric values are supported: 24 (24-bit RGB), 32 (32-bit ARGB), 40 (8-bit grey) The following 4-character-codes are supported: BGRA, RGBA, ABGR, 24BG, 2vuy, yuvs. (See http://developer.apple.com/library/mac/#technotes/tn2010/tn2273.html) | Depends on platform; default for Mac OS X is 32 (i.e. ARGB), default for Windows is BGRA. | 4.3.0 | |
| -[no]fliph | Flip camera image horizontally. | -nofliph | 4.3.0 | |
| -[no]flipv | Flip camera image vertically. | -noflipv | 4.3.0 | |
| -[no]singlebuffer | Use single buffering of captured video instead of triple-buffering. | -nosinglebuffer | 4.3.0 |</p>
<h4 id="quicktime-video-input-from-movie-file-or-stream">QuickTime Video Input from Movie File or Stream</h4>
<p>| video config string | usage notes | Default value | Avail.: (1) | Unavail.: (2) |
|---------------------|-------------|---------------|-------------|---------------|
| -device=QUICKTIME | Select this device for use. | 4.3.0 |  |
| -movie=<em>file:///path/to/file</em> or -movie=&quot;<em>file:///path/to/file</em>&quot; | Specifies that video should be acquired from a QuickTime movie resource. This can be any valid movie resource that QuickTime can open, including files and streams. If a movie file is to be opened, supply a file URI specifying the full pathname. Pathnames must be URI-encoded, i.e. if the pathname contains spaces, these should be replaced with &#39;+&#39; characters. e.g. -movie=&quot;file:///C:/Program+Files/QuickTime/Sample.mov&quot; or -movie=file:///Developer/Examples/WebKit/WebKitMoviePlugIn/sample.mov . If a movie stream is to be opened, it may be specified via an &quot;http://&quot;, &quot;rtsp://&quot; or &quot;ftp://&quot; URL, or it can be referred to in a stream description file (a .sdp file). In ARToolKit versions 4.3.0 - 4.4.4, the maximum URL length was 255 characters. As of ARToolKit 4.5.0, this has been increased to 1023 characters. | 4.3.0 |  |
| -[no]1to1 | Do not fit the movie to the window or buffer size, but instead display it at its original size (1 to 1 scaling). | -no1to1 | 4.3.0 |  |
| -[no]fill | Rather than fitting the movie into the window so that all the movie is visible, scale it so that it completely fills the window or buffer. The movie&#39;s aspect ratio will be maintained, and this may result in some of the movie being clipped at the top and bottom or left and right. | -nofill | 4.3.0 |  |
| -[no]stretch | Rather than fitting the movie into the window so that all the movie is visible, scale it so that it completely fills the window or buffer. The movie&#39;s aspect ratio will be stretched if necessary so that no pixels are clipped. | -nostretch | 4.3.0 |  |
| -[no]loop | Request that the movie loop continuously. This parameter has no effect for streaming movies. Unless this parameter is specified, calls to arVideoQuickTimeMovieIdle() will return AR_E_EOF when the movie has finished playing. | -loop | 4.3.0 |  |
| -[no]showcontroller | Show the QuickTime movie controller in the frame. (Unfortunately, the user will not be able to interact with the controller to pause and jog the movie.) | -showcontroller | 4.3.0 |  |
| -[no]mute | Set movie audio volume to 0. | -nomute | 4.3.0 |  |
| -[no]pause | Open movie in paused state. A call to arVideoCapStart() would be required to unpause the movie. | -pause | 4.3.0 |  |
| -width=<em>w</em> | Scale movie native frame to width w. | Width of movie frame. | 4.3.0 |  |
| -height=<em>h</em> | Scale movie native frame to height h. | Height of movie frame. | 4.3.0 |  |
| -[no]fliph | Flip movie frame horizontally. | -nofliph | 4.3.0 |  |
| -[no]flipv | Flip movie frame vertically. | -noflipv | 4.3.0 |  |
| -pixelformat=<em>cccc</em> | Ignored unless -offscreen is also passed, requests return of movie frames with pixels in format cccc, where cccc is either a numeric pixel format number or a valid 4-character-code for a pixel format. The following values are supported: 32, BGRA, RGBA, ABGR, 24, 24BG, 2vuy, yuvs. (See http://developer.apple.com/quicktime/icefloe/dispatch020.html) | Depends on platform; default for Mac OS X is 32 (i.e. ARGB), default for Windows is BGRA. | 4.3.0 |  |
| -[no]singlebuffer | Ignored unless -offscreen is also passed, use single buffering of captured movie instead of triple-buffering. | -nosinglebuffer | 4.3.0 |  |</p>
<h3 id="ar_video_device_quicktime_old">AR_VIDEO_DEVICE_QUICKTIME_OLD</h3>
<p>| video config string   | usage notes                               | Default value | Avail.: (1) | Unavail.: (2) |
|-----------------------|-------------------------------------------|---------------|-------------|---------------|
| -device=QUICKTIME_OLD | Select this device for use.               |               | 4.0.0       |               |
| -width=N              | Specify the width of the returned image.  | 640           | 4.0.0       |               |
| -height=N             | Specify the height of the returned image. | 480           | 4.0.0       |               |</p>
<h3 id="ar_video_device_windows_dsvideolib">AR_VIDEO_DEVICE_WINDOWS_DSVIDEOLIB</h3>
<p>| video config string          | usage notes                                                                                                                                                                                                                                | Default value                                                                                                                                                                                   | Avail.: (1) | Unavail.: (2) |
|------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|---------------|
| -device=WinDSVL              | Select this device for use.                                                                                                                                                                                                                |                                                                                                                                                                                                 | 4.1.0       |               |
| <em>remainder of config string</em> | Specify either an XML string (i.e. beginning &#39;&lt;?xml&#39;) or a pathname to an XML file (e.g. &#39;config.XML&#39;), conforming to the DSVideoLib XML Schema (<a href="http://www.artoolworks.com/support/attachments/DsVideoLib.xsd">DsVideoLib.xsd</a>). <a href="http://www.artoolworks.com/support/attachments/DsVideoLib.svg">View an interactive SVG view of the DSVideoLib XML Schema</a>. | <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;dsvl_input&gt;&lt;camera show_format_dialog=&quot;true&quot; friendly_name=&quot;&quot;&gt;&lt;pixel_format&gt;&lt;RGB32 flip_h=&quot;false&quot; flip_v=&quot;true&quot;/&gt;&lt;/pixel_format&gt;&lt;/camera&gt;&lt;/dsvl_input&gt;</code> | 4.1.0       |               |</p>
<h3 id="ar_video_device_gstreamer">AR_VIDEO_DEVICE_GSTREAMER</h3>
<p>| video config string          | usage notes                                                                                                     | Default value | Avail.: (1) | Unavail.: (2) |
|------------------------------|-----------------------------------------------------------------------------------------------------------------|---------------|-------------|---------------|
| -device=GStreamer            | Select this device for use.                                                                                     |               | 4.3.2       |               |
| <em>remainder of config string</em> | Specifies a configuration string following the gst-launch syntax. See more at <a href="config_video_capture_gstreamer">GStreamer Configuration</a>. |               | 4.3.2       |               |</p>
<h3 id="ar_video_device_iphone">AR_VIDEO_DEVICE_IPHONE</h3>
<p>The iOS video plugin is available on Apple iOS devices including iPhone 3G, iPhone 3GS, iPhone 4, iPod touch 4G and iPad 2.
As of ARToolKit for iOS version 4.5.5 (release 4) the iOS video plugin can operate in either two modes; either acquiring live video from a camera on the iOS device, or playing a pre-recorded video file stored in the app&#39;s bundle resource directory.</p>
<h4 id="ios-video-input-from-camera">iOS Video Input from Camera</h4>
<p>| video config string | usage notes                                                                                                                                                                                                                                                                                                                 | Default value                                                      | Avail.: (1)         | Unavail.: (2) |
|---------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|---------------------|---------------|
| -device=iPhone      | Select this device for use.                                                                                                                                                                                                                                                                                                 |                                                                    | 4.4.3 (release 1.0) |               |
| -format=<em>X</em>           | Return images with pixels in format X, where X is one of the following format tokens: 420v, 420f, BGRA, RGBA, RGBA_5551, RGBA_4444                                                                                                                                                                                          | 420f (ARToolKit v5.0 and later.), BGRA (ARToolKit version pre-5.0) | 4.4.3 (release 1.0) |               |
| -preset=<em>X</em>           | Specify use of camera settings preset X, where X is one of: cif, 480p, 720p, 1080p, low, medium, high, photo. (N.B.:480p=640x480, i.e. 4:3 aspect ratio, 720p=1280x720 and 1080p=1920x1080 i.e. 16:9 aspect ratio).                                                                                                         | medium                                                             | 4.5.1 (release 2.0) |               |
| -position=<em>X</em>         | Choose between rear/back and front-mounted camera (where available). Allowable values for X include: rear, back, front. (N.B.:rear is a synonym for back). Front is not supported on iPhone 3G or iPhone 3GS.                                                                                                               | rear                                                               | 4.5.1 (release 2.0) |               |
| -[no]flipv          | Flip the incoming image from the camera vertically. On front mounted-cameras, this option is on by default (but can be overridden by specifying -noflipv). Flipping the video vertically matches the orientation of the video image (when displayed on the screen of the device) to the physical orientation of the device. | noflipv (on rear camera). flipv (on front camera)                  | 4.5.4 (release 3.0) |               |
| -[no]fliph          | Flip the incoming image from the camera horizontally.                                                                                                                                                                                                                                                                       | nofliph                                                            | 4.6.6 (release 16)  |               |
| -width=<em>w</em>            | Crop native camera image width to w.                                                                                                                                                                                                                                                                                        | camera native image width for given preset (see above.)            | 4.4.3 (release 1.0) | 4.5.0-        |
| -height=<em>h</em>           | Crop native camera image height to h.                                                                                                                                                                                                                                                                                       | camera native image height for given preset (see above.)           | 4.4.3 (release 1.0) | 4.5.0-        |
| -bufferpow2         | Requests that images are returned in a buffer which has power-of-two dimensions.                                                                                                                                                                                                                                            | camera native image size for given preset (see below.)             | 4.4.3 (release 1.0) | 4.5.0-        |</p>
<h4 id="ios-video-input-from-movie-file">iOS Video Input from Movie File</h4>
<p>| video config string                      | usage notes                                                                                                                                                                                                                                                                                                                                                                      | Default value          | Avail.: (1)         | Unavail.: (2) |
|------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------|---------------------|---------------|
| -device=iPhone                           | Select this device for use.                                                                                                                                                                                                                                                                                                                                                      |                        | 4.5.5 (release 4.0) |               |
| -movie=<em>pathname</em> or -movie=&quot;<em>pathname</em>&quot; | Specifies that video should be acquired from a movie resource. This can be any valid movie file resource that iOS can open, but typically MPEG-4 (h.264 video with optional AAC audio). The pathname is relative to the resources directory of the app bundle. If the pathname contains spaces, it must be surrounded with double quotes (&quot;). e.g. -movie=&quot;My great sample.mov&quot;. |                        | 4.5.5 (release 4.0) |               |
| -[no]1to1                                | <strong>N.B. CURRENTLY IGNORED.</strong> Do not fit the movie to the window or buffer size, but instead display it at its original size (1 to 1 scaling).                                                                                                                                                                                                                                     | -no1to1                | 4.5.5 (release 4.0) |               |
| -[no]fill                                | <strong>N.B. CURRENTLY IGNORED.</strong> Rather than fitting the movie into the window so that all the movie is visible, scale it so that it completely fills the window or buffer. The movie&#39;s aspect ratio will be maintained, and this may result in some of the movie being clipped at the top and bottom or left and right.                                                              | -nofill                | 4.5.5 (release 4.0) |               |
| -[no]stretch                             | <strong>N.B. CURRENTLY IGNORED.</strong> Rather than fitting the movie into the window so that all the movie is visible, scale it so that it completely fills the window or buffer. The movie&#39;s aspect ratio will be stretched if necessary so that no pixels are clipped.                                                                                                                    | -stretch               | 4.5.5 (release 4.0) |               |
| -[no]loop                                | Request that the movie loop continuously.                                                                                                                                                                                                                                                                                                                                        | -loop                  | 4.5.5 (release 4.0) |               |
| -[no]mute                                | Set movie audio volume to 0.                                                                                                                                                                                                                                                                                                                                                     | -nomute                | 4.5.5 (release 4.0) |               |
| -[no]pause                               | Open movie in paused state. A call to arVideoCapStart() would be required to unpause the movie.                                                                                                                                                                                                                                                                                  | -pause                 | 4.5.5 (release 4.0) |               |
| -width=<em>w</em>                               | Scale movie native frame to width w.                                                                                                                                                                                                                                                                                                                                             | Width of movie frame.  | 4.5.5 (release 4.0) |               |
| -height=<em>h</em>                              | Scale movie native frame to height h.                                                                                                                                                                                                                                                                                                                                            | Height of movie frame. | 4.5.5 (release 4.0) |               |
| -[no]fliph                               | <strong>N.B. CURRENTLY IGNORED.</strong> Flip movie frame horizontally.                                                                                                                                                                                                                                                                                                                       | -nofliph               | 4.5.5 (release 4.0) |               |
| -[no]flipv                               | Flip movie frame vertically.                                                                                                                                                                                                                                                                                                                                                     | -noflipv               | 4.5.5 (release 4.0) |               |
| -pixelformat=<em>cccc</em>                      | Ignored unless -offscreen is also passed, requests return of movie frames with pixels in format cccc, where cccc is either a numeric pixel format number or a valid 4-character-code for a pixel format. The following values are supported: 32, BGRA, RGBA, ABGR, 24, 24BG, 2vuy, yuvs. (See http://developer.apple.com/quicktime/icefloe/dispatch020.html)                     | BGRA                   | 4.5.5 (release 4.0) |               |</p>
<h3 id="ar_video_device_windows_media_foundation">AR_VIDEO_DEVICE_WINDOWS_MEDIA_FOUNDATION</h3>
<p>| video config string | usage notes | Default value | Avail.: (1) | Unavail.: (2) |
|---------------------|-------------|---------------|-------------|---------------|
| -device=WinMF | Select this device for use. |  | 5.1.5 |  |
| -showDeviceList | Do not actually open the device, but instead dump a list of device numbers and device names to the standard output. The format of the dump is up to 2 decimal digits (beginning with &#39;1&#39; for the first device), followed by a colon and a space, and the remaining characters before the new line constituting the device name, as known to WDM. | -noShowDeviceList | 5.1.5 |  |
| -noShowDeviceList | Override a previous -showDeviceList option | -noShowDeviceList | 5.1.5 |  |
| -devNum=<em>n</em> | Open device n, rather than the default device. E.g. if two cameras are connected, use -devNum=2 to access the second camera. | 1 | 5.1.5 |  |
| -format=<em>X</em> | Return images with pixels in format X, where X is one of: BGRA, BGR, NV12/420f, 2vuy/UYVY, yuvs/YUY2, RGB_565, RGBA_5551. The most reliable format is BGRA, due to support within Media Foundation for conversion from YUV-colour spaces to RGB colour space. Other formats must be supported natively on the device in order for the request to succeed. | Default pixel format. | 5.1.5 |  |
| -width=<em>w</em> | Request video format of width w pixels | Default frame width | 5.1.5 |  |
| -height=<em>h</em> | Request video format of height h pixels | Default frame height | 5.1.5 |  |
| -flipV | Flip image vertically. | -noFlipV | 5.1.5 |  |
| -noFlipV | Override a previous -flipV option and do not flip image vertically. | -noFlipV | 5.1.5 |  |
| -showFormats | Dump the full list of native formats to the console. This is helpful in determining device capabilities. | -noShowFormats | 5.1.5 |  |
| -noShowFormats | Override a previous -showFormats option | -noShowFormats | 5.1.5 |  |</p>
<h3 id="ar_video_device_windows_media_capture">AR_VIDEO_DEVICE_WINDOWS_MEDIA_CAPTURE</h3>
<p>| video config string | usage notes                                                                                                                                                                                                                                                                                                                                                    | Default value         | Avail.: (1) | Unavail.: (2) |
|---------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|-------------|---------------|
| -device=WinMC       | Select this device for use.                                                                                                                                                                                                                                                                                                                                    |                       | 5.1.7       |               |
| -position=<em>X</em>       | Choose between rear/back and front-mounted (where available). Other options include cameras mounted on left, right, top or bottom edges of the device. Allowable values for X include: rear, back, front, left, right, top, bottom, default. (N.B.:rear is a synonym for back).                                                                                | default               | 5.1.7       |               |
| -devNum=<em>n</em>         | Open device <em>n</em>, rather than the default device. E.g. if two cameras are connected, use -devNum=2 to access the second camera. If this option is combined with the -position option, then it will choose the n&#39;th device at the preferred position. E.g. to choose the second of two rear cameras, you could use -position=rear -devNum=2.                     | 1                     | 5.1.7       |               |
| -format=<em>X</em>         | Return images with pixels in format X, where X is one of: BGRA, BGR, NV12/420f, 2vuy/UYVY, yuvs/YUY2, RGB_565, RGBA_5551. The most reliable format is BGRA, due to support within Windows Media Capture for conversion from YUV-colour spaces to RGB colour space. Other formats must be supported natively on the device in order for the request to succeed. | Default pixel format. | 5.1.7       |               |
| -width=<em>w</em>          | Request video format of width w pixels                                                                                                                                                                                                                                                                                                                         | Default frame height  | 5.1.7       |               |
| -height=<em>h</em>         | Request video format of height h pixels                                                                                                                                                                                                                                                                                                                        | Default frame height  | 5.1.7       |               |
| -flipV              | Flip image vertically.                                                                                                                                                                                                                                                                                                                                         | -noFlipV              | 5.1.7       |               |
| -noFlipV            | Override a previous -flipV option and do not flip image vertically.                                                                                                                                                                                                                                                                                            | -noFlipV              | 5.1.7       |               |</p>
<h1 id="configuring-gstreamer-video-capture-in-artoolkit">Configuring GStreamer Video Capture in ARToolKit</h1>
<p>A variety of GStreamer pipelines can be constructed, for example to pull video from a webcam, local file, or network stream. These are the important points to observe regarding where ARToolKit fits into a GStreamer pipeline:</p>
<ul>
<li>ARToolKit accepts video only in 24-bit RGB format, so must be prefixed with a capsfilter element &#39;video/x-raw-rgb,bpp=24&#39;. Usually, you will also need to use a &#39;ffmpegcolorspace&#39; element to convert incoming video into this format, unless the upstream source can already produce this format.</li>
<li>ARToolKit acquires the video from a GStreamer &#39;identity&#39; element, with the property &#39;name=artoolkit&#39;. You should also set the property &#39;sync=true&#39; on this element, or else some types of sources (e.g. video from a file) may run faster or slower than normal.</li>
<li>ARToolKit is NOT a sink pad, so generally, you should pipe the stream for ARToolKit to a &#39;fakesink&#39; element.</li>
</ul>
<p>Putting these points together, the <em>last</em> part of the GStreamer pipeline for ARToolKit will usually be:</p>
<p><code>ffmpegcolorspace ! video/x-raw-rgb,bpp=24 ! identity name=artoolkit sync=true ! fakesink</code></p>
<p>Note also that ARToolKit will respect the size of incoming video, so you can add the &#39;width=&#39; and &#39;height=&#39; properties to the capsfilter element, should you so desire.</p>
<p>Some complete examples:</p>
<ul>
<li>A webcam on /dev/video0 through Video4Linux v2 (V4L2): <code>v4l2src device=/dev/video0 use-fixed-fps=false ! ffmpegcolorspace ! video/x-raw-rgb,bpp=24 ! identity name=artoolkit sync=true ! fakesink</code></li>
<li>A file from disk: <code>filesrc location=gstreamer_test_xvid.avi ! decodebin2 ! ffmpegcolorspace ! video/x-raw-rgb,bpp=24 ! identity name=artoolkit sync=true ! fakesink</code></li>
<li>A dummy test source: <code>videotestsrc ! capsfilter caps=video/x-raw-rgb,bpp=24 ! identity name=artoolkit sync=true ! fakesink</code></li>
</ul>
<p>Further interesting reading concerning GStreamer and webcam control:</p>
<ul>
<li>http://www.oz9aec.net/index.php/gstreamer/345-a-weekend-with-gstreamer</li>
<li>http://www.oz9aec.net/index.php/gstreamer/367-webcam-pixel-formats-and-gstreamer-caps-filters.</li>
<li>http://benlau.blog.opensource.hk/2008/09/gstreamer-pipeline-description.html</li>
</ul>
